<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Agent</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Agent</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Agent<span class="signature">(config)</span><span class="type-signature"></span></h2>
        
            <div class="class-description"><p>Agent</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="Agent"><span class="type-signature"></span>new Agent<span class="signature">(config)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Creates an instance of a LoopGPT Agent.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>The configuration object for initializing the Agent class.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>keys</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#keyConfig">keyConfig</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The keys object containing model-related keys.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>The name of the agent. (optional)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>description</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>The description of the agent. (optional)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>goals</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>The goals associated with the agent. (optional)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>init_prompt</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>The init prompt with general operating instructions for generating responses. (optional)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next_prompt</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>The next prompt for evaluating responses and generating next responses. (optional)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>model</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="OpenAIModel.html">OpenAIModel</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>The OpenAI model for the agent. (optional)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tools</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>The tools associated with the agent. (optional)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>embedding_provider</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>The embedding provider for the agent. (optional)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>temperature</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>The temperature value for generating responses. (optional)</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line51">line 51</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="_tools"><span class="type-signature"></span>_tools<span class="type-signature"></span></h4>










<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line103">line 103</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="constraints"><span class="type-signature"></span>constraints<span class="type-signature"> :string|Array.&lt;any></span></h4>






    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>
|

<span class="param-type">Array.&lt;any></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line83">line 83</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="history"><span class="type-signature"></span>history<span class="type-signature"> :Array.&lt;{role: string, content: any}></span></h4>






    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Array.&lt;{role: string, content: any}></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line69">line 69</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="plan"><span class="type-signature"></span>plan<span class="type-signature"> :Array.&lt;any></span></h4>






    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Array.&lt;any></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line79">line 79</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="progress"><span class="type-signature"></span>progress<span class="type-signature"> :Array.&lt;any></span></h4>






    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Array.&lt;any></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line75">line 75</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="_getNonUserMessages"><span class="type-signature"></span>_getNonUserMessages<span class="signature">(n)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>This function returns the last n non-user messages from a chat history, excluding any system
messages that contain the phrase &quot;do_nothing&quot;.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>The number of non-user messages to retrieve from the chat history.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line140">line 140</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>This function returns an array of the last n non-user messages from the chat history,
excluding any system messages that contain the phrase &quot;do_nothing&quot;.</p>
</div>



    





        
            

    

    
    <h4 class="name" id="chat"><span class="type-signature">(async) </span>chat<span class="signature">(object)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>This is a function for a chatbot agent that handles user messages, runs a language model to
generate a response, and can stage and run tools based on the response.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>object</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>{message: string|null, run_tool: boolean,}</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line302">line 302</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The function <code>chat()</code> returns a Promise that resolves to the reply message from the
agent's conversation with the user, or an error message if an error occurs during the
conversation.</p>
</div>



    





        
            

    

    
    <h4 class="name" id="config"><span class="type-signature"></span>config<span class="signature">(init_prompt<span class="signature-attributes">opt</span>, next_prompt<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="Agent.html">Agent</a>}</span></h4>
    

    



<div class="description">
    <p>This function takes in two boolean parameters and returns a modified configuration object with
compressed history.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>init_prompt</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>A boolean value indicating whether or not to include the initial
prompt in the configuration object.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next_prompt</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>The &quot;next_prompt&quot; parameter is a boolean value that determines
whether or not a prompt should be displayed for the next input after the initial input. If set to
&quot;true&quot;, a prompt will be displayed for each subsequent input. If set to &quot;false&quot;, no prompt will be
displayed for subsequent inputs.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line120">line 120</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The <code>config</code> object with the <code>init_prompt</code> and <code>next_prompt</code> properties removed if their
corresponding arguments are <code>false</code>, and with the <code>history</code> property set to the compressed history
obtained from the <code>getCompressedHistory()</code> method.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Agent.html">Agent</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="constraintsPrompt"><span class="type-signature"></span>constraintsPrompt<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>The function generates a prompt message listing the constraints.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line651">line 651</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The function <code>constraintsPrompt()</code> returns a string that lists the constraints of an
object, with each constraint numbered and separated by a new line character.</p>
</div>



    





        
            

    

    
    <h4 class="name" id="extractJsonWithGpt"><span class="type-signature">(async) </span>extractJsonWithGpt<span class="signature">(s)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>The function extracts JSON from a given string using GPT.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>s</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The parameter <code>s</code> is a string that represents the input data that needs to be converted
to a JSON string.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line768">line 768</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The function <code>extractJsonWithGpt</code> is returning the result of calling <code>this.model.chat</code>
with a set of messages, a temperature of 0.0, and a maximum number of tokens to generate. The
messages include a system message with a JavaScript function and a default response format, and a
user message <code>s</code>.</p>
</div>



    





        
            

    

    
    <h4 class="name" id="getCompressedHistory"><span class="type-signature"></span>getCompressedHistory<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>This function returns a compressed version of a chat history by removing certain properties from
assistant messages.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line226">line 226</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The function <code>getCompressedHistory()</code> returns a modified version of the <code>history</code> array
of messages. The modifications include removing all messages with the role of &quot;user&quot; and removing
certain properties from the <code>thoughts</code> object of any messages with the role of &quot;assistant&quot;. The
modified <code>history</code> array is then returned.</p>
</div>



    





        
            

    

    
    <h4 class="name" id="getFullMessage"><span class="type-signature"></span>getFullMessage<span class="signature">(message)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    <p>This function returns a message with a prompt based on the current state of an agent.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last"><p>The message parameter is a string that represents the user's input or response to
the agent's prompt. It is an optional parameter that can be passed to the getFullMessage function.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line287">line 287</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The function <code>getFullMessage</code> is returning a string that includes either the
<code>init_prompt</code> or <code>next_prompt</code> property of the current object instance, followed by a new line and
the <code>message</code> parameter (if provided).</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getFullPrompt"><span class="type-signature">(async) </span>getFullPrompt<span class="signature">(user_input<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise.&lt;{full_prompt: Array.&lt;{role: string, content: string}>, token_count: number}>}</span></h4>
    

    



<div class="description">
    <p>This function generates a full prompt for a chatbot conversation, including system messages, user
input, and relevant memory.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user_input</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>The user's input, which is an optional parameter. If provided, it will be
added to the prompt as a user message.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line160">line 160</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <ul>
<li>An object with two properties: &quot;full_prompt&quot; which is an array of messages to be
displayed to the user, and &quot;token_count&quot; which is the number of tokens used by the messages in the
&quot;full_prompt&quot; array.</li>
</ul>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;{full_prompt: Array.&lt;{role: string, content: string}>, token_count: number}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="goalsPrompt"><span class="type-signature"></span>goalsPrompt<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>The function generates a prompt displaying a list of goals.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line637">line 637</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The <code>goalsPrompt()</code> function is returning a string that lists the goals of an object,
with each goal numbered and separated by a newline character.</p>
</div>



    





        
            

    

    
    <h4 class="name" id="headerPrompt"><span class="type-signature"></span>headerPrompt<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>The function returns a string prompt based on the persona, goals, constraints, plan, and progress
of a project.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line574">line 574</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The <code>headerPrompt()</code> function is returning a string that includes prompts for the
persona, goals, constraints, plan, and progress, joined together with line breaks.</p>
</div>



    





        
            

    

    
    <h4 class="name" id="loadJson"><span class="type-signature">(async) </span>loadJson<span class="signature">(s, try_gpt<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>The function attempts to parse a string as JSON, and if it fails, it may try to extract the JSON
using GPT or return the original string.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>s</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The input string that contains the JSON data to be parsed.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>try_gpt</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last"><p>A boolean parameter that indicates whether to try extracting JSON using
GPT if the initial parsing fails. If set to true, the function will attempt to extract JSON using
GPT if the initial parsing fails. If set to false, the function will not attempt to extract JSON
using GPT.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line716">line 716</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The <code>loadJson</code> function returns a parsed JSON object if the input string is in valid JSON
format, or a string representation of the input if it cannot be parsed as JSON. If the input
cannot be parsed as JSON and the <code>try_gpt</code> parameter is <code>true</code>, the function will attempt to
extract JSON using a GPT model and retry parsing. If parsing still fails, an error is</p>
</div>



    





        
            

    

    
    <h4 class="name" id="personaPrompt"><span class="type-signature"></span>personaPrompt<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>The function returns a string that includes the name and description of a person.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line601">line 601</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The function <code>personaPrompt()</code> is returning a string that includes the name and
description of the object that the function is called on. The specific values of <code>this.name</code> and
<code>this.description</code> will depend on the object that the function is called on.</p>
</div>



    





        
            

    

    
    <h4 class="name" id="planPrompt"><span class="type-signature"></span>planPrompt<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>The function returns a string that displays the current plan.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line627">line 627</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The <code>planPrompt()</code> method is returning a string that includes the current plan joined
together with new line characters and preceded by the text &quot;CURRENT PLAN:&quot;.</p>
</div>



    





        
            

    

    
    <h4 class="name" id="progressPrompt"><span class="type-signature"></span>progressPrompt<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>The function generates a progress prompt by iterating through a list of completed tasks and
displaying them in a formatted string.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line613">line 613</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The <code>progressPrompt()</code> function is returning a string that lists the progress made so
far. The string includes a header &quot;PROGRESS SO FAR:&quot; and a numbered list of tasks that have been
completed, with each item in the list formatted as &quot;DONE - [task description]&quot;. The items in the
list are separated by newline characters.</p>
</div>



    





        
            

    

    
    <h4 class="name" id="runStagingTool"><span class="type-signature">(async) </span>runStagingTool<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>The function runs a staging tool with specified arguments and returns the result or an error
message.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line811">line 811</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The function <code>runStagingTool()</code> returns different responses depending on the conditions
met in the code. It can return a string response or an object response depending on the command
and arguments provided. The specific response returned is indicated in the code comments.</p>
</div>



    





        
            

    

    
    <h4 class="name" id="toolsPrompt"><span class="type-signature"></span>toolsPrompt<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    <p>Displays the prompt for selecting tools.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="agent.js.html">agent.js</a>, <a href="agent.js.html#line664">line 664</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The tool prompt.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Agent.html">Agent</a></li><li><a href="BaseEmbeddingProvider.html">BaseEmbeddingProvider</a></li><li><a href="global.html#BaseTool">BaseTool</a></li><li><a href="KeyConfig.html">KeyConfig</a></li><li><a href="LocalMemory.html">LocalMemory</a></li><li><a href="OpenAIEmbeddingProvider.html">OpenAIEmbeddingProvider</a></li><li><a href="OpenAIModel.html">OpenAIModel</a></li><li><a href="Summarizer.html">Summarizer</a></li><li><a href="WebPageScraper.html">WebPageScraper</a></li><li><a href="WebSearch.html">WebSearch</a></li></ul><h3>Global</h3><ul><li><a href="global.html#assert">assert</a></li><li><a href="global.html#countTokens">countTokens</a></li><li><a href="global.html#dotProduct">dotProduct</a></li><li><a href="global.html#generateUniqueKey">generateUniqueKey</a></li><li><a href="global.html#isBalanced">isBalanced</a></li><li><a href="global.html#openDatabase">openDatabase</a></li><li><a href="global.html#optimizeContext">optimizeContext</a></li><li><a href="global.html#retrieveKeysAndContext">retrieveKeysAndContext</a></li><li><a href="global.html#retrieveText">retrieveText</a></li><li><a href="global.html#saveTextToIndexedDB">saveTextToIndexedDB</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue May 23 2023 10:30:31 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>